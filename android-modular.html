<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modular Android Project | Rakawm</title>
    <meta name="description" content="Software Engineer, Motorcycle Enthusiast">
    
    
    <link rel="preload" href="/assets/css/0.styles.021a0155.css" as="style"><link rel="preload" href="/assets/js/app.677728b0.js" as="script"><link rel="preload" href="/assets/js/4.18ecf1d4.js" as="script"><link rel="prefetch" href="/assets/js/3.40849f77.js"><link rel="prefetch" href="/assets/js/2.61c5963e.js"><link rel="prefetch" href="/assets/js/5.9674cecb.js"><link rel="prefetch" href="/assets/js/6.a04bd145.js"><link rel="prefetch" href="/assets/js/7.8b0e9971.js"><link rel="prefetch" href="/assets/js/8.ed9cf4df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.021a0155.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Rakawm
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/rakawestu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/rakawestu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><a href="/" class="sidebar-link">Hello World</a></li><li><a href="/android-modular.html" class="active sidebar-link">Modular Android Project</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android-modular.html#background" class="sidebar-link">Background</a></li><li class="sidebar-sub-header"><a href="/android-modular.html#solution" class="sidebar-link">Solution</a></li><li class="sidebar-sub-header"><a href="/android-modular.html#case-study" class="sidebar-link">Case Study</a></li><li class="sidebar-sub-header"><a href="/android-modular.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/initialize-your-own-android-library-project-from-scratch.html" class="sidebar-link">Initialize Your Own Android Library Project from Scratch</a></li><li><a href="/publishing-android-library-to-bintray.html" class="sidebar-link">Publishing Android Library to Bintray</a></li><li><a href="/reactive-single-data-source-android.html" class="sidebar-link">Single Data Source Reactive Android Application</a></li><li><a href="/offline-first-application.html" class="sidebar-link">Offline First Application</a></li></ul></div><div class="page"><div class="content"><h1 id="modular-android-project"><a href="#modular-android-project" aria-hidden="true" class="header-anchor">#</a> Modular Android Project</h1><p>This article I wrote after successfully present it at Facebook Developer Circles #2 at Jogja Digital Valley,August 15 2017. You can see it on <a href="https://www.slideshare.net/RakaWestuMogandhi/modular-android-project" target="_blank" rel="noopener noreferrer">this slide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><iframe src="//www.slideshare.net/slideshow/embed_code/key/60ISAHsmLjdXQt" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowfullscreen="allowfullscreen" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;"></iframe><p>This is a concept of Android development which is good to be implemented when we have multiple teams.</p><p>Do you have any idea how people develop Android application nowadays?</p><ol><li>Create project in Android Studio</li><li>Android Studio generate project and files needed for initial development. It also generate a module called <strong>app</strong>.</li><li>Development is only use this <strong>app</strong> module.</li></ol><p>Is that wrong? Not at all, that’s the right way to develop a single application.</p><p>So what is this Modular Android Project concept stands for?</p><p>It’s a concept of Android development workflow when we have <strong>multiple</strong> teams working on single application.</p><h2 id="background"><a href="#background" aria-hidden="true" class="header-anchor">#</a> Background</h2><p>Why is this concept could be a solution to your teams ?</p><ul><li>Once your application codebase is big, it becomes hard to add or just update a feature. You need to edit many files in many packages.</li><li>Working with multiple teams means you need to conform many implementation style. It’s just not possible to use many implementation styles in single application.</li><li>When we want to adapt or just trying a new technology concept on specific feature set, we may need to refactor the entire application because the new technology is not applicable on current implementation.</li></ul><h2 id="solution"><a href="#solution" aria-hidden="true" class="header-anchor">#</a> Solution</h2><p>Have you heard of microservice concept?</p><blockquote><p><strong>Microservice is a particular way of designing software applications as suites of independently deployable services.</strong></p></blockquote><p>Do you think it can be implemented in Android project? Yes, of course. We can use Android module to apply it.</p><p>What is <em>Android module</em> ? It’s a component of Android project. There are two types of Android module: <em>application</em> and <em>library</em>.</p><ul><li>Application module can be deployed into APK which can be run on Android device or emulator.
Library module cannot be deployed into APK, you need to implement it on application module so it can be deployed as part of the application.</li><li>There are many examples of this library module. You may also have recognized it. There are Android support libraries, Firebase libraries, or third party libraries like Glide, RxJava, or Retrofit.</li></ul><hr><p>So, how can we decompose an application project into several modules?</p><p>There are many approach to do it. You need to consider your business needs and your teams. As far as I know we can decompose an application into several component based on +features_ or <em>functions</em>.</p><ul><li>Decomposition based on features means the application component should be based on its business features.
For example we have an e-commerce application, we can divide it into several components: authentication, product, checkout, history and analytics.</li><li>Decomposition based on functions means the application component should be based on its functions.
For example we can just divide an application into <em>core</em> (which have generic function without UI) and <em>ui</em> (which have UI that implements core component).</li></ul><h2 id="case-study"><a href="#case-study" aria-hidden="true" class="header-anchor">#</a> Case Study</h2><p>On this part I will provide an example how to implement this modular concept on e-commerce application.</p><h3 id="authentication-module"><a href="#authentication-module" aria-hidden="true" class="header-anchor">#</a> Authentication Module</h3><p>Authentication module includes all user authentication related action. This module needs to have login, register, forgot password, etc.</p><p>We can define some abstracted functions to be implemented on this module.</p><ul><li>Start login page → <code>Auth.startLoginPage(ACTIVITY, LOGIN_RESULT_LISTENER)</code></li><li>Start register page → <code>Auth.startRegisterPage(ACTIVITY)</code></li><li>Start forgot password page → <code>Auth.startForgotPasswordPage(ACTIVITY)</code></li><li>Check if user has logged in → <code>(Boolean) = Auth.isLoggedIn()</code></li><li>Get authentication user data → <code>(UserID, Access Token, etc. ) = Auth.getAuthenticatedUser()</code></li></ul><p>What is <code>LOGIN_RESULT_LISTENER</code> ? It’s a defined interface which will be triggered when login action is completed.</p><h3 id="product-module"><a href="#product-module" aria-hidden="true" class="header-anchor">#</a> Product Module</h3><p>Product module includes all product related action. In e-commerce application, user can see product catalog,product details, add it to favorites, see product favorites.</p><ul><li>Start product catalog page → <code>Prod.startProductCatalog(ACTIVITY, CHECKOUT_ACTION_CALLBACK)</code></li><li>Start product favorites → <code>Prod.startProductFavorites(ACTIVITY, CHECKOUT_ACTION_CALLBACK)</code></li></ul><p>What is <code>CHECKOUT_ACTION_CALLBACK</code> ? It’s a defined interface which will be triggered on product buy action on product details page. Because buy action is implemented on checkout module. Product module doesn’t need to know how it’s implemented, so it’s defined as an interface.</p><h3 id="checkout-module"><a href="#checkout-module" aria-hidden="true" class="header-anchor">#</a> Checkout Module</h3><p>Checkout module includes all buy action related action. Add items to the cart, manage shopping cart, start payment are included features.</p><ul><li>Add item to cart → <code>Checkout.addToCart(ACTIVITY, ITEM_NAME, ITEM_PRICE, PAYMENT_COMPLETED_LISTENER)</code></li><li>Start shopping cart page → <code>Checkout.startShoppingCartPage(ACTIVITY)</code></li></ul><p><code>PAYMENT_COMPLETED_LISTENER</code> is a defined interface to be called when payment is completed.</p><h3 id="history-module"><a href="#history-module" aria-hidden="true" class="header-anchor">#</a> History Module</h3><p>History module includes transaction history page which holds any transactions done by user.</p><ul><li>Show transaction history → <code>History.startTransactionHistoryPage(ACTIVITY)</code></li></ul><h3 id="analytics-module"><a href="#analytics-module" aria-hidden="true" class="header-anchor">#</a> Analytics Module</h3><p>Analytics modules is only used to track event needed for internal analytics so there are only one function provided in this module.</p><ul><li>Track event → <code>Analytics.trackEvent(EVENT_NAME)</code></li></ul><h3 id="application-module"><a href="#application-module" aria-hidden="true" class="header-anchor">#</a> Application Module</h3><p>After working on each components of the application, we need to compose how each component communicate with each other in a single application module.</p><p>Application module will be used as starting point of the application. It depends on any previously created modules. Here are the examples.</p><div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> AppCompatActivity <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">checkIfUserIsAlreadyLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">initCheckoutListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">checkIfUserIsAlreadyLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Auth<span class="token punctuation">.</span><span class="token function">isLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Start product catalog</span>
            <span class="token function">startProductCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// Start login page</span>
            Auth<span class="token punctuation">.</span><span class="token function">startLoginPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> LoginResultListener <span class="token punctuation">{</span>
                <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLoginSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Handle login success</span>
                    <span class="token function">startProductCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                
                <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLoginFailure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Handle login failure</span>
                <span class="token punctuation">}</span>            
            <span class="token punctuation">}</span><span class="token punctuation">)</span>        
        <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">startProductCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Prod<span class="token punctuation">.</span><span class="token function">startProductCatalog</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token operator">:</span>ProductActionListener<span class="token punctuation">{</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onProductBuyActionClicked</span><span class="token punctuation">(</span>product<span class="token operator">:</span> Product<span class="token punctuation">)</span><span class="token punctuation">{</span>
            Checkout<span class="token punctuation">.</span><span class="token function">addToCart</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> product<span class="token punctuation">.</span>name<span class="token punctuation">,</span> product<span class="token punctuation">.</span>price<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onShoppingCartActionClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Checkout<span class="token punctuation">.</span><span class="token function">startShoppingCartPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>  <span class="token keyword">object</span><span class="token operator">:</span>PaymentCompletedListener<span class="token punctuation">{</span>
                    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPaymentCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// Handle payment completed</span>
                        History<span class="token punctuation">.</span><span class="token function">startTransactionHistoryPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><hr><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>There are some advantages and disadvantages when implementing this concept.</p><p><strong>Advantages</strong></p><ul><li>Good for teams. Each teams has smaller focus. Also because each module can be developed independently, each teams can have different implementation style.</li></ul><p><strong>Disadvantages</strong></p><ul><li>Communication between modules is important. There should be a documentation how to use each module.</li><li>Duplicate code is common → Can be minimized when moved to generic module.</li><li>Build time is increased because each module needs to be compiled first.</li></ul></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/" class="prev router-link-active">
          Hello World
        </a></span><span class="next"><a href="/initialize-your-own-android-library-project-from-scratch.html">
          Initialize Your Own Android Library Project from Scratch
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/4.18ecf1d4.js" defer></script><script src="/assets/js/app.677728b0.js" defer></script>
  </body>
</html>
